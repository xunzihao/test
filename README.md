# 💰 Cashback Counter (返现小助手)

**Cashback Counter** 是一款基于 **SwiftUI** 和 **SwiftData** 构建的现代 iOS 记账应用。它不仅能记录日常消费，最核心的功能是**智能计算信用卡返现**。通过集成 **Apple Intelligence** 和 **Vision** 框架，它实现了“拍一拍”自动识别小票、自动选卡、自动计算最优返现金额，帮助用户最大化利用信用卡权益。

## ✨ 核心功能 (Features)

* **📸 智能拍一笔 (AI-Powered Entry)**
    * **自定义相机**：集成 AVFoundation 实现无缝拍照体验。
    * **AI 识别**：利用 **Apple Foundation Models** (端侧大模型) 深度分析收据，自动提取商户、金额、日期。
    * **智能分类**：根据商户名自动推断消费类别（餐饮、出行、数码等）。
    * **自动选卡**：通过识别收据上的卡号后四位，自动匹配并选中对应的信用卡。
* **💳 卡片管理 (Card Management)**
    * 支持添加自定义信用卡，设置复杂的返现规则（如：餐饮 5%，超市 3%，境外 3%）。
    * **模版库**：内置常见香港银行（信银国际，汇丰香港/美国，工银亚洲等）模版，一键添加。
    * **多维规则**：支持基于**消费类别 (Category)** 和 **消费地区 (Region)** 的混合计算逻辑。
* **🌍 多币种支持 (Multi-Currency)**
    * 支持全球主流货币（CNY, USD, HKD, JPY 等）。
    * **实时汇率**：集成 **Frankfurter API**，自动将外币消费换算为本币（CNY）进行统计。
    * **入账金额**：支持记录消费原币金额与实际入账金额（解决银行汇率差问题）。
* **🔒 隐私至上**
    * 您的财务数据仅保存在您的设备本地（基于 SwiftData），我们不上传、不收集任何敏感消费记录。安全，让您更放心。

## 未来计划

* ☑️导出每月/年消费量为csv
* ☑️生成针对每张卡的消费和返现表格
* ☑️类原生Apple Pay界面
* 允许生成收入单，匹配部分支出，计算利润
* 货币类型支持更多国家
* 完善多币种信用卡的返现规则
* ☑️统计信用卡返现上限
* ☑️上架TestFlight
  
## 目前已知的问题
* 无法针对新台币进行货币转换（免费API没有这个类）
* 面对其他货币例如欧元无法使用
* 删除了卡片之后账单中无法保留原卡片
* 没有区分卡组织
* 不确定在大量数据下系统稳定性如何

## 关于本项目

* 本人是第一次用swift开发，大部分调用都使用的是Gemini，如果有bug欢迎提pr
* 目前请不要直接用于记账，因为可能还会重构一下数据库，不确定更新之后会不会崩导致丢数据（因为数据目前全部存在本地）
